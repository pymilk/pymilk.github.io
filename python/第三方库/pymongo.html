<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pymongo | Joy小学堂</title>
    <meta name="description" content="让编程成为一种乐趣和生产力!">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/images/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <script>
            var _hmt = _hmt || [];
            (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?9f7fe5852a05d6e87a33006e7967d1b6";
                var s = document.getElementsByTagName("script")[0]; 
                s.parentNode.insertBefore(hm, s);
            })();
            </script>
    
    <link rel="preload" href="/assets/css/0.styles.84742488.css" as="style"><link rel="preload" href="/assets/js/app.246e7364.js" as="script"><link rel="preload" href="/assets/js/2.ac0e51c3.js" as="script"><link rel="preload" href="/assets/js/92.985ffc9e.js" as="script"><link rel="preload" href="/assets/js/3.e7578487.js" as="script"><link rel="prefetch" href="/assets/js/10.7a76a5c3.js"><link rel="prefetch" href="/assets/js/100.f1aaf05a.js"><link rel="prefetch" href="/assets/js/101.6c1ba9e6.js"><link rel="prefetch" href="/assets/js/102.908db249.js"><link rel="prefetch" href="/assets/js/103.c241eb9b.js"><link rel="prefetch" href="/assets/js/104.dc6eb9d7.js"><link rel="prefetch" href="/assets/js/11.857a2c50.js"><link rel="prefetch" href="/assets/js/12.77419d37.js"><link rel="prefetch" href="/assets/js/13.0e0b14df.js"><link rel="prefetch" href="/assets/js/14.f4eb71e7.js"><link rel="prefetch" href="/assets/js/15.703ba482.js"><link rel="prefetch" href="/assets/js/16.6d7193fc.js"><link rel="prefetch" href="/assets/js/17.d36bf309.js"><link rel="prefetch" href="/assets/js/18.522d6776.js"><link rel="prefetch" href="/assets/js/19.3394828f.js"><link rel="prefetch" href="/assets/js/20.a2a60b28.js"><link rel="prefetch" href="/assets/js/21.b251a2e6.js"><link rel="prefetch" href="/assets/js/22.9467a8c2.js"><link rel="prefetch" href="/assets/js/23.435ee730.js"><link rel="prefetch" href="/assets/js/24.75cf600c.js"><link rel="prefetch" href="/assets/js/25.c612784c.js"><link rel="prefetch" href="/assets/js/26.288eb4d8.js"><link rel="prefetch" href="/assets/js/27.21319e49.js"><link rel="prefetch" href="/assets/js/28.24e10a6d.js"><link rel="prefetch" href="/assets/js/29.c412c7b2.js"><link rel="prefetch" href="/assets/js/30.ed1cd468.js"><link rel="prefetch" href="/assets/js/31.68b18e06.js"><link rel="prefetch" href="/assets/js/32.c1a3d9cf.js"><link rel="prefetch" href="/assets/js/33.14e6b561.js"><link rel="prefetch" href="/assets/js/34.6bc6e305.js"><link rel="prefetch" href="/assets/js/35.1087821c.js"><link rel="prefetch" href="/assets/js/36.93847ecf.js"><link rel="prefetch" href="/assets/js/37.f6dc63c5.js"><link rel="prefetch" href="/assets/js/38.f935ed32.js"><link rel="prefetch" href="/assets/js/39.1c153eb3.js"><link rel="prefetch" href="/assets/js/4.ad14a03b.js"><link rel="prefetch" href="/assets/js/40.2b5cad98.js"><link rel="prefetch" href="/assets/js/41.553a8864.js"><link rel="prefetch" href="/assets/js/42.c383f2b9.js"><link rel="prefetch" href="/assets/js/43.9ecf8eae.js"><link rel="prefetch" href="/assets/js/44.f368de26.js"><link rel="prefetch" href="/assets/js/45.e8996118.js"><link rel="prefetch" href="/assets/js/46.4990c99c.js"><link rel="prefetch" href="/assets/js/47.639ab911.js"><link rel="prefetch" href="/assets/js/48.54fa39ae.js"><link rel="prefetch" href="/assets/js/49.e7bfcf3b.js"><link rel="prefetch" href="/assets/js/5.e05650f0.js"><link rel="prefetch" href="/assets/js/50.ade61087.js"><link rel="prefetch" href="/assets/js/51.93618b20.js"><link rel="prefetch" href="/assets/js/52.0ce2dd43.js"><link rel="prefetch" href="/assets/js/53.118ef746.js"><link rel="prefetch" href="/assets/js/54.9f0cf5b2.js"><link rel="prefetch" href="/assets/js/55.caaac3b7.js"><link rel="prefetch" href="/assets/js/56.e3125f53.js"><link rel="prefetch" href="/assets/js/57.5cf33439.js"><link rel="prefetch" href="/assets/js/58.ee46d513.js"><link rel="prefetch" href="/assets/js/59.e6ae1a32.js"><link rel="prefetch" href="/assets/js/6.8b493e06.js"><link rel="prefetch" href="/assets/js/60.c612fd05.js"><link rel="prefetch" href="/assets/js/61.45c264bd.js"><link rel="prefetch" href="/assets/js/62.7a0ae376.js"><link rel="prefetch" href="/assets/js/63.305ba309.js"><link rel="prefetch" href="/assets/js/64.135e2c89.js"><link rel="prefetch" href="/assets/js/65.4ac5abca.js"><link rel="prefetch" href="/assets/js/66.84527a1e.js"><link rel="prefetch" href="/assets/js/67.cfa44212.js"><link rel="prefetch" href="/assets/js/68.1de2c265.js"><link rel="prefetch" href="/assets/js/69.15ad8a93.js"><link rel="prefetch" href="/assets/js/7.a46cbbad.js"><link rel="prefetch" href="/assets/js/70.96557b6e.js"><link rel="prefetch" href="/assets/js/71.6d05a942.js"><link rel="prefetch" href="/assets/js/72.9aac71d5.js"><link rel="prefetch" href="/assets/js/73.8ef09e69.js"><link rel="prefetch" href="/assets/js/74.a07e52c4.js"><link rel="prefetch" href="/assets/js/75.c77095d1.js"><link rel="prefetch" href="/assets/js/76.e6b3bf3c.js"><link rel="prefetch" href="/assets/js/77.e5fb62b4.js"><link rel="prefetch" href="/assets/js/78.04353540.js"><link rel="prefetch" href="/assets/js/79.8ae94d09.js"><link rel="prefetch" href="/assets/js/8.10963a63.js"><link rel="prefetch" href="/assets/js/80.0ae65b85.js"><link rel="prefetch" href="/assets/js/81.05e28a80.js"><link rel="prefetch" href="/assets/js/82.f4541217.js"><link rel="prefetch" href="/assets/js/83.ecd1d1c3.js"><link rel="prefetch" href="/assets/js/84.fb10cf56.js"><link rel="prefetch" href="/assets/js/85.35fd51d6.js"><link rel="prefetch" href="/assets/js/86.f2d964ea.js"><link rel="prefetch" href="/assets/js/87.154681a8.js"><link rel="prefetch" href="/assets/js/88.6eca87af.js"><link rel="prefetch" href="/assets/js/89.66bccaac.js"><link rel="prefetch" href="/assets/js/9.a39fc63e.js"><link rel="prefetch" href="/assets/js/90.5851e3c2.js"><link rel="prefetch" href="/assets/js/91.80bcd93d.js"><link rel="prefetch" href="/assets/js/93.50518834.js"><link rel="prefetch" href="/assets/js/94.561cfa48.js"><link rel="prefetch" href="/assets/js/95.9ff52f6e.js"><link rel="prefetch" href="/assets/js/96.73dc9200.js"><link rel="prefetch" href="/assets/js/97.79f1840e.js"><link rel="prefetch" href="/assets/js/98.823f22ce.js"><link rel="prefetch" href="/assets/js/99.5d4abeac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.84742488.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Joy小学堂</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python系列" class="dropdown-title"><span class="title">Python系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/基础语法/" class="nav-link">
  基础语法
</a></li><li class="dropdown-item"><!----> <a href="/python/版本特性/" class="nav-link">
  版本特性
</a></li><li class="dropdown-item"><!----> <a href="/python/进阶/" class="nav-link">
  进阶
</a></li><li class="dropdown-item"><!----> <a href="/python/标准库/" class="nav-link">
  标准库
</a></li><li class="dropdown-item"><!----> <a href="/python/第三方库/" class="nav-link">
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/python/爬虫/" class="nav-link">
  爬虫
</a></li></ul></div></div><div class="nav-item"><a href="/joy/" class="nav-link">
  乐趣
</a></div><div class="nav-item"><a href="/productivity/" class="nav-link">
  生产力
</a></div><div class="nav-item"><a href="/man/" class="nav-link">
  命令手册
</a></div><div class="nav-item"><a href="/snippet/" class="nav-link">
  代码片段
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  零散笔记
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python系列" class="dropdown-title"><span class="title">Python系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/基础语法/" class="nav-link">
  基础语法
</a></li><li class="dropdown-item"><!----> <a href="/python/版本特性/" class="nav-link">
  版本特性
</a></li><li class="dropdown-item"><!----> <a href="/python/进阶/" class="nav-link">
  进阶
</a></li><li class="dropdown-item"><!----> <a href="/python/标准库/" class="nav-link">
  标准库
</a></li><li class="dropdown-item"><!----> <a href="/python/第三方库/" class="nav-link">
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/python/爬虫/" class="nav-link">
  爬虫
</a></li></ul></div></div><div class="nav-item"><a href="/joy/" class="nav-link">
  乐趣
</a></div><div class="nav-item"><a href="/productivity/" class="nav-link">
  生产力
</a></div><div class="nav-item"><a href="/man/" class="nav-link">
  命令手册
</a></div><div class="nav-item"><a href="/snippet/" class="nav-link">
  代码片段
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  零散笔记
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/python/基础语法/" class="sidebar-heading clickable"><span>基础语法</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/python/版本特性/" class="sidebar-heading clickable"><span>版本特性</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/python/进阶/" class="sidebar-heading clickable"><span>进阶</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/python/标准库/" class="sidebar-heading clickable"><span>标准库</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/python/第三方库/" class="sidebar-heading clickable open"><span>第三方库</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/第三方库/jieba.html" class="sidebar-link">jieba</a></li><li><a href="/python/第三方库/playsound.html" class="sidebar-link">playsound</a></li><li><a href="/python/第三方库/pulp.html" class="sidebar-link">pulp</a></li><li><a href="/python/第三方库/pymongo.html" class="active sidebar-link">pymongo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#一、连接" class="sidebar-link">一、连接</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#二、指定数据库" class="sidebar-link">二、指定数据库</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#三、指定集合" class="sidebar-link">三、指定集合</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#四、插入数据" class="sidebar-link">四、插入数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_1-插入一条" class="sidebar-link">1. 插入一条</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_2-插入多条" class="sidebar-link">2. 插入多条</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#五、查询" class="sidebar-link">五、查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_1-查询一条" class="sidebar-link">1. 查询一条</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_2-查询多条" class="sidebar-link">2. 查询多条</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_3-条件筛选" class="sidebar-link">3. 条件筛选</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_4-正则表达式筛选" class="sidebar-link">4. 正则表达式筛选</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#六、计数" class="sidebar-link">六、计数</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#七、排序" class="sidebar-link">七、排序</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#八、偏移" class="sidebar-link">八、偏移</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#九、更新" class="sidebar-link">九、更新</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_1-更新一条" class="sidebar-link">1. 更新一条</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_2-更新多条" class="sidebar-link">2. 更新多条</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#十、删除" class="sidebar-link">十、删除</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_1-删除一条" class="sidebar-link">1. 删除一条</a></li><li class="sidebar-sub-header"><a href="/python/第三方库/pymongo.html#_2-删除多条" class="sidebar-link">2. 删除多条</a></li></ul></li></ul></li><li><a href="/python/第三方库/pyyaml.html" class="sidebar-link">pyyaml</a></li><li><a href="/python/第三方库/slash.html" class="sidebar-link">slash</a></li><li><a href="/python/第三方库/sympy.html" class="sidebar-link">sympy</a></li><li><a href="/python/第三方库/tesserocr.html" class="sidebar-link">tesserocr</a></li></ul></section></li><li><a href="/python/%E7%88%AC%E8%99%AB/" class="sidebar-link">爬虫</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pymongo"><a href="#pymongo" class="header-anchor">#</a> pymongo</h1> <p><strong>请根据笔记的写作日期，选择性阅读。</strong></p> <blockquote><p><strong>作者：</strong> <a href="/about/">放羊的大少爷</a><br> <strong>Home：</strong> <a href="/" class="router-link-active">joynoting.com</a><br> <strong>写作日期：</strong> 2018-12-27<br> <strong>系统：</strong> Mac@10.14.2<br> <strong>软件版本：</strong>
mongodb@4.0.4<br>
Python@3.6.7<br>
pymongo@3.7.1<br> <strong>参考：</strong><br> <a href="http://api.mongodb.com/python/current/tutorial.html" target="_blank" rel="noopener noreferrer">PyMongo 3.7.2 Tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://docs.mongodb.com/manual/reference/operator/update/" target="_blank" rel="noopener noreferrer">Update Operators<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <hr> <p>PyMongo is a Python distribution containing tools for working with MongoDB, and is the recommended way to work with MongoDB from Python. This documentation attempts to explain everything you need to know to use PyMongo.</p> <p>PyMongo 是一个 Python 发行版，包含用于处理 MongoDB 的工具 ，是从 Python 中使用 MongoDB 的推荐方法。
MongoDB 是由 C++ 语言编写的非关系型数据库。</p> <p>以本地的 hello 库的 students 集合为例，端口为27017。</p> <hr> <h2 id="一、连接"><a href="#一、连接" class="header-anchor">#</a> 一、连接</h2> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 导入 pymongo</span>
<span class="token keyword">import</span> pymongo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 连接 mongodb</span>
client <span class="token operator">=</span> pymongo<span class="token punctuation">.</span>MongoClient<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">27017</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h2 id="二、指定数据库"><a href="#二、指定数据库" class="header-anchor">#</a> 二、指定数据库</h2> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 指定为 hello 数据库</span>
db <span class="token operator">=</span> client<span class="token punctuation">.</span>hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>等价于：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 指定为 hello 数据库</span>
db <span class="token operator">=</span> client<span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h2 id="三、指定集合"><a href="#三、指定集合" class="header-anchor">#</a> 三、指定集合</h2> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 指定为 students 数据库</span>
collection <span class="token operator">=</span> db<span class="token punctuation">.</span>students
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>等价于：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 指定为 students 数据库</span>
collection <span class="token operator">=</span> db<span class="token punctuation">[</span><span class="token string">&quot;students&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h2 id="四、插入数据"><a href="#四、插入数据" class="header-anchor">#</a> 四、插入数据</h2> <div class="language-python line-numbers-mode"><pre class="language-python"><code>student <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">,</span>
    <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'male'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_1-插入一条"><a href="#_1-插入一条" class="header-anchor">#</a> 1. 插入一条</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>insert_one<span class="token punctuation">(</span>student<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-插入多条"><a href="#_2-插入多条" class="header-anchor">#</a> 2. 插入多条</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>student1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'cherry'</span><span class="token punctuation">,</span> 
    <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span> 
    <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'male'</span>
<span class="token punctuation">}</span>

student2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> 
    <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">17</span><span class="token punctuation">,</span> 
    <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'male'</span>
<span class="token punctuation">}</span>

student3 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'grape'</span><span class="token punctuation">,</span> 
    <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">17</span><span class="token punctuation">,</span> 
    <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'male'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code>ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>insert_many<span class="token punctuation">(</span><span class="token punctuation">[</span>student1<span class="token punctuation">,</span> student2<span class="token punctuation">,</span> student3<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><hr> <h2 id="五、查询"><a href="#五、查询" class="header-anchor">#</a> 五、查询</h2> <h3 id="_1-查询一条"><a href="#_1-查询一条" class="header-anchor">#</a> 1. 查询一条</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>find_one<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 查看查询到数据</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>{'_id': ObjectId('5c249dbc327a65247254dfc2'), 'name': 'apple', 'age': 18, 'gender': 'male'}
</code></pre></div><h3 id="_2-查询多条"><a href="#_2-查询多条" class="header-anchor">#</a> 2. 查询多条</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 查看查询到数据</span>
ret <span class="token operator">=</span> <span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> ret<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>[{'_id': ObjectId('5c249dbc327a65247254dfc2'), 'name': 'apple', 'age': 18, 'gender': 'male'}, {'_id': ObjectId('5c249dc1327a65247254dfc3'), 'name': 'cherry', 'age': 18, 'gender': 'male'}]
</code></pre></div><p><code>find()</code>  返回的为一个迭代器。</p> <h3 id="_3-条件筛选"><a href="#_3-条件筛选" class="header-anchor">#</a> 3. 条件筛选</h3> <p>条件筛选：</p> <table><thead><tr><th>符号</th> <th>含义</th> <th>示例</th></tr></thead> <tbody><tr><td>$lt</td> <td>小于</td> <td><code>{'age': {'$lt': 20}}</code></td></tr> <tr><td>$gt</td> <td>大于</td> <td><code>{'age': {'$gt': 20}}</code></td></tr> <tr><td>$lte</td> <td>小于等于</td> <td><code>{'age': {'$lte': 20}}</code></td></tr> <tr><td>$gte</td> <td>大于等于</td> <td><code>{'age': {'$gte': 20}}</code></td></tr> <tr><td>$ne</td> <td>不等于</td> <td><code>{'age': {'$ne': 20}}</code></td></tr> <tr><td>$in</td> <td>在范围内</td> <td><code>{'age': {'$in': [20, 23]}}</code></td></tr> <tr><td>$nin</td> <td>不在范围内</td> <td><code>{'age': {'$nin': [20, 23]}}</code></td></tr></tbody></table> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 查询年龄大于17的学生</span>
ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'$gt'</span><span class="token punctuation">:</span> <span class="token number">17</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 查看查询到数据</span>
ret <span class="token operator">=</span> <span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> ret<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>[{'_id': ObjectId('5c249dbc327a65247254dfc2'), 'name': 'apple', 'age': 18, 'gender': 'male'}, {'_id': ObjectId('5c249dc1327a65247254dfc3'), 'name': 'cherry', 'age': 18, 'gender': 'male'}]
</code></pre></div><h3 id="_4-正则表达式筛选"><a href="#_4-正则表达式筛选" class="header-anchor">#</a> 4. 正则表达式筛选</h3> <p>正则表达式筛选：</p> <table><thead><tr><th>符号</th> <th>含义</th> <th>示例</th> <th>示例含义</th></tr></thead> <tbody><tr><td>$regex</td> <td>匹配正则</td> <td><code>{'name': {'$regex': '^M.*'}}</code></td> <td>name 以 M开头</td></tr> <tr><td>$exists</td> <td>属性是否存在</td> <td><code>{'name': {'$exists': True}}</code></td> <td>name 属性存在</td></tr> <tr><td>$type</td> <td>类型判断</td> <td><code>{'age': {'$type': 'int'}}</code></td> <td>age 的类型为 int</td></tr> <tr><td>$mod</td> <td>数字模操作</td> <td><code>{'age': {'$mod': [5, 0]}}</code></td> <td>年龄模 5 余 0</td></tr> <tr><td>$text</td> <td>文本查询</td> <td><code>{'$text': {'$search': 'Mike'}}</code></td> <td>text 类型的属性中包含 Mike 字符串</td></tr> <tr><td>$where</td> <td>高级条件查询</td> <td><code>{'$where': 'obj.fans_count == obj.follows_count'}</code></td> <td>自身粉丝数等于关注数</td></tr></tbody></table> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 查询 name 以 a 开头的学生</span>
ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'$regex'</span><span class="token punctuation">:</span> <span class="token string">'^a.*'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 查看查询到数据</span>
ret <span class="token operator">=</span> <span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> ret<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>[{'_id': ObjectId('5c249dbc327a65247254dfc2'), 'name': 'apple', 'age': 18, 'gender': 'male'}]
</code></pre></div><h2 id="六、计数"><a href="#六、计数" class="header-anchor">#</a> 六、计数</h2> <blockquote><p>注意：pymongo v3.7.1 版本中 count() 不可用。</p></blockquote> <p>所有计数：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 旧方法 collection.find().count() 不可用</span>
count <span class="token operator">=</span> collection<span class="token punctuation">.</span>count_documents<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>4
</code></pre></div><p>条件筛选计数：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 旧方法 collection.find({'age': 18}).count() 不可用</span>
count <span class="token operator">=</span> collection<span class="token punctuation">.</span>count_documents<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>2
</code></pre></div><hr> <h2 id="七、排序"><a href="#七、排序" class="header-anchor">#</a> 七、排序</h2> <p>在查询结果之后调用 sort() 函数即可。</p> <p>参数：</p> <ul><li>pymongo.ASCENDING：升序</li> <li>pymongo.DESCENDING：降序</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> pymongo<span class="token punctuation">.</span>ASCENDING<span class="token punctuation">)</span>

<span class="token comment"># 查看查询到数据</span>
ret <span class="token operator">=</span> <span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> ret<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>[{'_id': ObjectId('5c249dbc327a65247254dfc2'), 'name': 'apple', 'age': 18, 'gender': 'male'}, {'_id': ObjectId('5c249dc1327a65247254dfc3'), 'name': 'cherry', 'age': 18, 'gender': 'male'}, {'_id': ObjectId('5c249dc1327a65247254dfc5'), 'name': 'grape', 'age': 17, 'gender': 'male'}, {'_id': ObjectId('5c249dc1327a65247254dfc4'), 'name': 'orange', 'age': 17, 'gender': 'male'}]
</code></pre></div><hr> <h2 id="八、偏移"><a href="#八、偏移" class="header-anchor">#</a> 八、偏移</h2> <p>在查询结果之后，skip() 可以跳过指定的偏移量。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 跳过前2个元素，得到第3个及之后的元素</span>
ret <span class="token operator">=</span> collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> pymongo<span class="token punctuation">.</span>ASCENDING<span class="token punctuation">)</span><span class="token punctuation">.</span>skip<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 查看查询到数据</span>
ret <span class="token operator">=</span> <span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> ret<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>[{'_id': ObjectId('5c249dc1327a65247254dfc5'), 'name': 'grape', 'age': 17, 'gender': 'male'}, {'_id': ObjectId('5c249dc1327a65247254dfc4'), 'name': 'orange', 'age': 17, 'gender': 'male'}]
</code></pre></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 配置 limit() 限制结果个数为2个</span>
results <span class="token operator">=</span> collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> pymongo<span class="token punctuation">.</span>ASCENDING<span class="token punctuation">)</span><span class="token punctuation">.</span>skip<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 查看查询到数据</span>
ret <span class="token operator">=</span> <span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> ret<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- extra-class"><pre><code>[{'_id': ObjectId('5c249dc1327a65247254dfc5'), 'name': 'grape', 'age': 17, 'gender': 'male'}, {'_id': ObjectId('5c249dc1327a65247254dfc4'), 'name': 'orange', 'age': 17, 'gender': 'male'}]
</code></pre></div><hr> <h2 id="九、更新"><a href="#九、更新" class="header-anchor">#</a> 九、更新</h2> <p>更新的数据需要配合 <code>$</code> 使用，比如 Fields 的<code>$</code> 的参数如下：</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/currentDate/#up._S_currentDate" target="_blank" rel="noopener noreferrer"><code>$currentDate</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Sets the value of a field to current date, either as a Date or a Timestamp.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/inc/#up._S_inc" target="_blank" rel="noopener noreferrer"><code>$inc</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Increments the value of the field by the specified amount.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/min/#up._S_min" target="_blank" rel="noopener noreferrer"><code>$min</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Only updates the field if the specified value is less than the existing field value.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/max/#up._S_max" target="_blank" rel="noopener noreferrer"><code>$max</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Only updates the field if the specified value is greater than the existing field value.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/mul/#up._S_mul" target="_blank" rel="noopener noreferrer"><code>$mul</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Multiplies the value of the field by the specified amount.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/rename/#up._S_rename" target="_blank" rel="noopener noreferrer"><code>$rename</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Renames a field.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/set/#up._S_set" target="_blank" rel="noopener noreferrer"><code>$set</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Sets the value of a field in a document.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/setOnInsert/#up._S_setOnInsert" target="_blank" rel="noopener noreferrer"><code>$setOnInsert</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Sets the value of a field if an update results in an insert of a document. Has no effect on update operations that modify existing documents.</td></tr> <tr><td><a href="https://docs.mongodb.com/manual/reference/operator/update/unset/#up._S_unset" target="_blank" rel="noopener noreferrer"><code>$unset</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>Removes the specified field from a document.</td></tr></tbody></table> <p>更多的参数可以查看 <a href="https://docs.mongodb.com/manual/reference/operator/update/" target="_blank" rel="noopener noreferrer">官方文档 Update Operators<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_1-更新一条"><a href="#_1-更新一条" class="header-anchor">#</a> 1. 更新一条</h3> <h4 id="_1-1-原地修改"><a href="#_1-1-原地修改" class="header-anchor">#</a> 1.1 原地修改</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>condition <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">}</span>
ncondition <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">}</span>
result <span class="token operator">=</span> collection<span class="token punctuation">.</span>update_one<span class="token punctuation">(</span>condition<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'$set'</span><span class="token punctuation">:</span> ncondition<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 匹配的条数，影响的条数</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>matched_count<span class="token punctuation">,</span> result<span class="token punctuation">.</span>modified_count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>1 1
</code></pre></div><blockquote><p>注意：replace_one() 同样是更新，但是如果使用 replace_one()，将只覆盖该条数据，未更新的数据将会被删除。</p></blockquote> <h4 id="_1-2-查询后修改"><a href="#_1-2-查询后修改" class="header-anchor">#</a> 1.2 查询后修改</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>condition <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">}</span>
student <span class="token operator">=</span> collection<span class="token punctuation">.</span>find_one<span class="token punctuation">(</span>condition<span class="token punctuation">)</span>
student<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
result <span class="token operator">=</span> collection<span class="token punctuation">.</span>update_one<span class="token punctuation">(</span>condition<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'$set'</span><span class="token punctuation">:</span> student<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 匹配的条数，影响的条数</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>matched_count<span class="token punctuation">,</span> result<span class="token punctuation">.</span>modified_count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>1 1
</code></pre></div><h3 id="_2-更新多条"><a href="#_2-更新多条" class="header-anchor">#</a> 2. 更新多条</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 将年龄大于18的学生年龄都修改为16</span>
condition <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'$gt'</span><span class="token punctuation">:</span> <span class="token number">17</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
result <span class="token operator">=</span> collection<span class="token punctuation">.</span>update_many<span class="token punctuation">(</span>condition<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'$set'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 匹配的条数，修改的条数</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>matched_count<span class="token punctuation">,</span> result<span class="token punctuation">.</span>modified_count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>2 2
</code></pre></div><hr> <h2 id="十、删除"><a href="#十、删除" class="header-anchor">#</a> 十、删除</h2> <h3 id="_1-删除一条"><a href="#_1-删除一条" class="header-anchor">#</a> 1. 删除一条</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>result <span class="token operator">=</span> collection<span class="token punctuation">.</span>delete_one<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'apple'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 删除的条数</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>deleted_count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>0
</code></pre></div><h3 id="_2-删除多条"><a href="#_2-删除多条" class="header-anchor">#</a> 2. 删除多条</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>result <span class="token operator">=</span> collection<span class="token punctuation">.</span>delete_many<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'$lt'</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 删除的条数</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>deleted_count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>输出结果：</p> <div class="language- extra-class"><pre><code>4
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">2020/3/13 下午12:44:00</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/第三方库/pulp.html" class="prev">
        pulp
      </a></span> <span class="next"><a href="/python/第三方库/pyyaml.html">
        pyyaml
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><div id="goTop" class="hide-cat" data-v-b0a1babe></div><div class="container" data-v-0178ff65><canvas id="live2d" width="280" height="250" class="live2d-right" data-v-0178ff65></canvas></div><canvas id="vuepress-canvas-ribbon"></canvas></div></div>
    <script src="/assets/js/app.246e7364.js" defer></script><script src="/assets/js/2.ac0e51c3.js" defer></script><script src="/assets/js/92.985ffc9e.js" defer></script><script src="/assets/js/3.e7578487.js" defer></script>
  </body>
</html>
