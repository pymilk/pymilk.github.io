(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{317:function(s,t,a){"use strict";a.r(t);var e=a(9),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"tesserocr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tesserocr"}},[s._v("#")]),s._v(" tesserocr")]),s._v(" "),a("p",[a("strong",[s._v("请根据笔记的写作日期，选择性阅读。")])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("作者：")]),s._v(" "),a("RouterLink",{attrs:{to:"/about/"}},[s._v(s._s(s.$themeConfig.self.name))]),a("br"),s._v(" "),a("strong",[s._v("Home：")]),s._v(" "),a("RouterLink",{attrs:{to:"/"}},[s._v(s._s(s.$themeConfig.self.site))]),a("br"),s._v(" "),a("strong",[s._v("写作日期：")]),s._v(" 2018-12-25"),a("br"),s._v(" "),a("strong",[s._v("系统：")]),s._v(" Mac@10.14.2"),a("br"),s._v(" "),a("strong",[s._v("软件版本：")]),s._v("\nAnaconda@1.9.6"),a("br"),s._v("\nconda@4.5.12"),a("br"),s._v("\nPython@3.6.7"),a("br"),s._v("\nimagemagick@7.0.8-19"),a("br"),s._v("\ntesseract@4.0.0"),a("br"),s._v("\ntesserocr@2.4.0"),a("br"),s._v(" "),a("strong",[s._v("参考：")]),a("br"),s._v(" "),a("a",{attrs:{href:"https://github.com/sirfz/tesserocr",target:"_blank",rel:"noopener noreferrer"}},[s._v("tesserocr"),a("OutboundLink")],1)],1)]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"一、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、安装"}},[s._v("#")]),s._v(" 一、安装")]),s._v(" "),a("h3",{attrs:{id:"_1-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装依赖"}},[s._v("#")]),s._v(" 1. 安装依赖")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" imagemagick\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tesseract --all-languages\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pillow\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("至此，基础组件安装完成，以下图的验证码为例，切换到图片所在的目录下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/content/images/2018/12/yzm.jpeg",alt:"yzm"}})]),s._v(" "),a("p",[s._v("输入以下代码进行测试：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" tesseract yzm.jpeg result -l eng "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" result.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("运行结果：\n"),a("img",{attrs:{src:"/content/images/2018/12/yzm_ret.png",alt:"yzm_ret"}})]),s._v(" "),a("p",[s._v("代码运行后，会在图片所在的目录下生成一个 "),a("code",[s._v("result.txt")]),s._v(" 文件，文件中的内容就是图片的识别结果。")]),s._v(" "),a("h3",{attrs:{id:"_2-安装tesserocr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装tesserocr"}},[s._v("#")]),s._v(" 2. 安装tesserocr")]),s._v(" "),a("p",[s._v("接下来安装 tesserocr：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tesserocr\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"二、示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、示例"}},[s._v("#")]),s._v(" 二、示例")]),s._v(" "),a("p",[s._v("至此，tesserocr 已安装完成，接下来进行测试：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" tesserocr\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" PIL "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Image\n\nimage "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yzm.jpeg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nret "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tesserocr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("image_to_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("以上测试会出错，错误信息为：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/content/images/2018/12/tesserocr.png",alt:"tesserocr"}})]),s._v(" "),a("p",[s._v("错误的原因不详，但是已 google 到解决办法，只需要在代码顶部添加如下两行代码即可：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" locale\nlocale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setlocale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("locale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("LC_ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'C'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" tesserocr\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" PIL "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Image\n\nimage "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yzm.jpeg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nret "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tesserocr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("image_to_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("运行结果：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/content/images/2018/12/yzm-ret2.png",alt:"yzm-ret2"}})])])}),[],!1,null,null,null);t.default=r.exports}}]);