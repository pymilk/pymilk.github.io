(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{283:function(s,t,a){"use strict";a.r(t);var n=a(9),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ubuntu上部署ghost"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu上部署ghost"}},[s._v("#")]),s._v(" Ubuntu上部署Ghost")]),s._v(" "),a("p",[a("strong",[s._v("请根据笔记的写作日期，选择性阅读。")])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("作者：")]),s._v(" "),a("RouterLink",{attrs:{to:"/about/"}},[s._v(s._s(s.$themeConfig.self.name))]),a("br"),s._v(" "),a("strong",[s._v("Home：")]),s._v(" "),a("RouterLink",{attrs:{to:"/"}},[s._v(s._s(s.$themeConfig.self.site))]),a("br"),s._v(" "),a("strong",[s._v("写作日期：")]),s._v(" 2018-11-19"),a("br"),s._v(" "),a("strong",[s._v("系统：")]),s._v(" Ubuntu@18.04"),a("br"),s._v(" "),a("strong",[s._v("软件版本：")]),a("br"),s._v("\nNodejs@v10.14.1"),a("br"),s._v("\nGhost-CLI@1.9.8"),a("br"),s._v("\nGhost@2.6.2"),a("br"),s._v("\nNginx@1.14.0"),a("br"),s._v(" "),a("strong",[s._v("参考：")]),a("br"),s._v(" "),a("a",{attrs:{href:"https://docs.ghost.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ghost Documentation"),a("OutboundLink")],1)],1)]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("阅读本篇笔记前，建议先阅读另一篇笔记"),a("RouterLink",{attrs:{to:"/note/搭建个人博客/使用Ghost本地搭建个人博客.html"}},[s._v("《使用Ghost本地搭建个人博客》")]),s._v("。")],1),s._v(" "),a("blockquote",[a("p",[s._v("注意：因为这篇笔记距离 《本地搭建个人博客~Ghost》 有一段时间，所以各软件版本存在差异，但是不影响本篇笔记所述的安装方法。")])]),s._v(" "),a("p",[s._v("本次搭建使用的机器是在腾讯云购买的CVM，本篇着重讲解在 Ubuntu 上为 Ghost 搭建做的前提准备以及 Nginx 配置。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"一、前提准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、前提准备"}},[s._v("#")]),s._v(" 一、前提准备")]),s._v(" "),a("h3",{attrs:{id:"_1-查看系统版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看系统版本"}},[s._v("#")]),s._v(" 1. 查看系统版本")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.04")]),s._v(".1 LTS\nRelease:        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.04")]),s._v("\nCodename:       bionic\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_2-安装curl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装curl"}},[s._v("#")]),s._v(" 2. 安装curl")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-安装nodejs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装nodejs"}},[s._v("#")]),s._v(" 3. 安装Nodejs")]),s._v(" "),a("p",[s._v("与本地搭建 Nodejs 一样，需要查看 Ghost 所支持的 Nodejs 版本，选择兼容的 Nodejs 版本进行安装。")]),s._v(" "),a("p",[s._v("我这里选择的是 v10.14.1 版本。")]),s._v(" "),a("p",[s._v("默认情况下 apt-get 安装的版本不确定，所以需要提前设置指定版本。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://deb.nodesource.com/setup_10.x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -E "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后安装 Nodejs")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nodejs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("版本列表可以在这里查看：\nhttps://github.com/nodesource/distributions/tree/master/deb\n然后自行修改参数 "),a("strong",[s._v("setup_10.x")])])]),s._v(" "),a("p",[s._v("安装完成后查看自己的 Nodejs 版本")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" node -v\nv10.14.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_4-安装nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装nginx"}},[s._v("#")]),s._v(" 4. 安装Nginx")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"二、安装ghost"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、安装ghost"}},[s._v("#")]),s._v(" 二、安装Ghost")]),s._v(" "),a("p",[s._v("现在开始正式安装 Ghost，我采用的是全局安装 Ghost-CLI 的方式进行本地安装，这只是安装方式的一种，除此之外，你还可以选择 git 源码进行安装。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/TryGhost/Ghost",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击查看 官方源码"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("安装步骤如下：")]),s._v(" "),a("ol",[a("li",[s._v("全局安装 Ghost-CLI")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ghost-cli -g\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：如果不以管理员权限运行，将会出现错误信息。")])]),s._v(" "),a("p",[s._v("如果已经安装，想要升级 ghost-cli，可执行以下命令。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g ghost-cli@latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("本地安装Ghost")])]),s._v(" "),a("p",[s._v("Ghost-CLI 安装完成后，cd 到一个空目录下安装 Ghost，该目录就是 Ghost 的安装目录。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")]),s._v(" 以后执行 "),a("code",[s._v("ghost start")]),s._v(" 命令需要 cd 到该目录下执行。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ghost "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"三、nginx配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、nginx配置"}},[s._v("#")]),s._v(" 三、Nginx配置")]),s._v(" "),a("ol",[a("li",[s._v("删除默认的 Nginx 全部配置文件")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/nginx/sites-available/default\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/nginx/sites-enabled/default\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/nginx/conf.d/default\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("新建配置文件")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /etc/nginx/sites-available/ghost.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("添加文件的权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" ghost.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("以我的域名 "),a("code",[s._v("pymilk.com")]),s._v("为例，配置文件 "),a("code",[s._v("ghost.conf")]),s._v(" 的内容如下：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("server {\n    listen 80;\n    server_name pymilk.com;\n    location / {\n        proxy_set_header   X-Real-IP $remote_addr;\n        proxy_set_header   Host      $http_host;\n        proxy_pass         http://127.0.0.1:2368;\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("创建文件的软链接")])]),s._v(" "),a("p",[s._v("此时文件 "),a("code",[s._v("ghost.conf")]),s._v(" 还未生效，需要把它软链接到 sites-enabled 中:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /etc/nginx/sites-available/ghost.conf /etc/nginx/sites-enabled/ghost.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("重启Nginx服务器")])]),s._v(" "),a("p",[s._v("至此 Nginx 已配置完成，重启Nginx服务器即可。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nginx restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("访问主站")])]),s._v(" "),a("p",[s._v("至此已经全部搭建完成，不出意外即可直接访问主机 IP。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"四、配置dns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、配置dns"}},[s._v("#")]),s._v(" 四、配置DNS")]),s._v(" "),a("p",[s._v("这里简单提一下 DNS 的配置吧，到域名服务商那里添加一条 A 记录，内容如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/content/images/2018/12/pymilk.png",alt:"pymilk"}})]),s._v(" "),a("p",[s._v("其中记录值为自己的主机 IP。")]),s._v(" "),a("p",[s._v("<完>")])])}),[],!1,null,null,null);t.default=e.exports}}]);