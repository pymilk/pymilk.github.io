(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{250:function(s,a,t){"use strict";t.r(a);var n=t(9),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mongodb安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodb安装"}},[s._v("#")]),s._v(" MongoDB安装")]),s._v(" "),t("p",[t("strong",[s._v("请根据笔记的写作日期，选择性阅读。")])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("作者：")]),s._v(" "),t("RouterLink",{attrs:{to:"/about/"}},[s._v(s._s(s.$themeConfig.self.name))]),t("br"),s._v(" "),t("strong",[s._v("Home：")]),s._v(" "),t("RouterLink",{attrs:{to:"/"}},[s._v(s._s(s.$themeConfig.self.site))]),t("br"),s._v(" "),t("strong",[s._v("写作日期：")]),s._v(" 2018-12-21"),t("br"),s._v(" "),t("strong",[s._v("系统：")]),s._v(" Mac@10.14.2"),t("br"),s._v(" "),t("strong",[s._v("软件版本：")]),s._v("\nMongoDB@4.0.4"),t("br"),s._v("\nRobo 3T@1.2.1"),t("br"),s._v(" "),t("strong",[s._v("参考：")]),t("br"),s._v(" "),t("a",{attrs:{href:"https://www.mongodb.com/download-center/community",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB"),t("OutboundLink")],1),t("br"),s._v(" "),t("a",{attrs:{href:"https://robomongo.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Robo 3T"),t("OutboundLink")],1)],1)]),s._v(" "),t("p",[s._v("数据库主要分为两种，关系型数据库和非关系型数据库。与关系型数据库相比，突出的优点和不足如下：")]),s._v(" "),t("p",[s._v("优点：")]),s._v(" "),t("ul",[t("li",[s._v("非关系型数据的性能高于关系型，")])]),s._v(" "),t("p",[s._v("不足：")]),s._v(" "),t("ul",[t("li",[s._v("不支持事务和复杂的联合操作")])]),s._v(" "),t("p",[s._v("爬虫比较适合使用非关系型数据库，而 MongoDB 就是非关系型数据库的代表，所以我选择了 MongoDB 作为爬虫的数据库。")]),s._v(" "),t("p",[s._v("本文主要是在 Mac 系统下使用 brew 方式安装。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"一、安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装"}},[s._v("#")]),s._v(" 一、安装")]),s._v(" "),t("p",[s._v("brew 方式安装：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" brew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mongodb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("配置文件默认在："),t("code",[s._v("/usr/local/etc/mongod.conf")])]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("dbpath")]),s._v(" 参数设置：数据存放目录")]),s._v(" "),t("p",[t("img",{attrs:{src:"/content/images/2018/12/mongodb0.png",alt:"mongodb0"}})]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"二、启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、启动"}},[s._v("#")]),s._v(" 二、启动")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 mongodb")]),s._v("\nbrew services start mongodb\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 mongodb 控制台")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mongo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:"/content/images/2018/12/mongodb1.png",alt:"mongodb1"}})]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"三、创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、创建用户"}},[s._v("#")]),s._v(" 三、创建用户")]),s._v(" "),t("h3",{attrs:{id:"_1-进入mongodb的交互式界面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入mongodb的交互式界面"}},[s._v("#")]),s._v(" 1. 进入mongodb的交互式界面")]),s._v(" "),t("p",[s._v("启动 mongodb 之后，输以下命令进入 mongodb 的交互式界面。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mongo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/content/images/2018/12/mongodb2-1.png",alt:"mongodb2-1"}})]),s._v(" "),t("h3",{attrs:{id:"_2-退出mongodb的交互式界面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-退出mongodb的交互式界面"}},[s._v("#")]),s._v(" 2. 退出mongodb的交互式界面")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" quit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建用户"}},[s._v("#")]),s._v(" 3. 创建用户")]),s._v(" "),t("p",[s._v("3.1 创建超级管理员")]),s._v(" "),t("p",[s._v("系统默认有三个内置数据库，其中 admin 为超级管理员数据库，这三个数据库都没有建立账户，我们可以先创建超级管理员用户。")]),s._v(" "),t("p",[s._v("使用以下命令可以查看所有的数据库。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" show dbs\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("admin 数据库为超级管理员数据库，这个数据库的用户可以访问任何其他数据库的数据。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选择 admin 数据库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" use admin\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为 admin 数据库创建用户，用户名为 admin，密码为 admin，角色为 root")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" db.createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(", pwd:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(", roles:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("创建完成之后，查看该数据库下的用户：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看该数据库下的所有用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" show "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/content/images/2018/12/mongodb3.png",alt:"mongodb3"}})]),s._v(" "),t("p",[t("code",[s._v("show users")]),s._v(" 只能看到该数据库的所有用户，不能检测密码，下面的命令可以验证用户名和密码是否匹配。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证刚创建的 admin 用户，返回 1 表示验证通过，0 表示验证失败")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" db.auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("3.2 创建普通用户")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选择 hello 数据库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" use hello\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为 hello 数据库创建用户，用户名为 hello，密码为 hello，角色为 dbOwner")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" db.createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v(", pwd: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v(", roles: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dbOwner"')]),s._v(", db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"blog"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("验证用户：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证刚创建的 hello 用户，返回 1 表示验证通过，0 表示验证失败")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" db.auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"四、-停止"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、-停止"}},[s._v("#")]),s._v(" 四、 停止")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("brew services stop mongodb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"五、-重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、-重启"}},[s._v("#")]),s._v(" 五、 重启")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("brew services restart mongodb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"六、配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、配置文件"}},[s._v("#")]),s._v(" 六、配置文件")]),s._v(" "),t("p",[s._v("生成配置文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mongod --config /usr/local/etc/mongod.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("dbpath：数据存放目录")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"六、查看状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、查看状态"}},[s._v("#")]),s._v(" 六、查看状态")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("brew services list\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("输出结果：\n"),t("img",{attrs:{src:"/content/images/2019/01/mongodb--.png",alt:"mongodb--"}})]),s._v(" "),t("p",[s._v("找到名为 "),t("code",[s._v("mongodb")]),s._v(" 的记录，就能看到它的 Status 了。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"七、robo-3t"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七、robo-3t"}},[s._v("#")]),s._v(" 七、Robo 3T")]),s._v(" "),t("p",[s._v("推荐一款可视化的 MongoDB 管理工具，"),t("a",{attrs:{href:"https://robomongo.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击查看 Robo 3T"),t("OutboundLink")],1),s._v("，Studio 3T 是收费的版本，选择右侧的 Robo 3T 下载，该版本是开源免费的轻量级工具。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/content/images/2018/12/mongodb4-1.png",alt:"mongodb4-1"}})]),s._v(" "),t("p",[s._v("下载安装完成后，按照下面的步骤即可进行数据库的管理：")]),s._v(" "),t("p",[t("img",{attrs:{src:"/content/images/2018/12/mongodb5-1.png",alt:"mongodb5-1"}})]),s._v(" "),t("p",[s._v("其中，Name 任意，就是给自己识别的标签，与具体的数据库无关。")])])}),[],!1,null,null,null);a.default=e.exports}}]);